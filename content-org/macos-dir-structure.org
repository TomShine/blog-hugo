#+HUGO_BASE_DIR: ~/Dropbox/org-notes/blog
#+HUGO_SECTION: ./post
#+TITLE: macOS 的目录结构
#+DATE: 2018-10-08
#+options: author:nil
#+HUGO_AUTO_SET_LASTMOD: t
#+HUGO_TAGS: 
#+HUGO_CATEGORIES: 
#+HUGO_DRAFT: true

=Mac= 机器主板使用了 =Intel= 主导的 =EFI= 标准，硬盘分区格式采用 =GPT=。这种 =EFI+GPT= 的方式相比传统的 =BIOS＋MBR= 的方式有很多好处。

* 硬盘分区

  默认情况下，=macOS= 把硬盘分成了3个 =GPT= 分区。

  1. 第一个分区：就是 GPT 标准要求的 ESP 分区，这个分区很小，200MB，FAT 文件系统格式。按照 EFI 惯例，应该用来存放操作系统的引导程序。但是苹果没有遵守这个惯例，它的引导程序 =boot.efi= 并没有存放在 ESP 中，这个分区只是被苹果用来存放升级固件的文件。
  2. 第二个分区：就是*macOS 的系统分区*，它占用了大部分磁盘空间，用来存放整个 =macOS= 系统和用户数据，分区文件系统格式为 =HFS+=。

  - 第三个分区：是*系统恢复分区*，里面存放了一个精简的 =macOS= 系统，用来完成系统恢复、安装等任务，类似于 =WindowsPE=。默认情况下，=macOS= 自带的磁盘工具并不能显示 ESP 分区和恢复分区，需要开启 DEBUG 菜单才可以。开启方法为：=defaults write com.apple.DiskUtility DUDebugMenuEnabled 1=

* macOS 系统分区的目录结构

  =macOS= 有着很深的 =Unix= 血统，所以其目录结构基本符合 Unix 系统目录结构。但是有很多目录在Finder 中并看不到，这是因为这些目录的被设置了隐藏属性，我们可以在终端窗口中利用 Unix 命令查看。

*** 符合 Unix 传统的目录

    - =/=: 根目录(root, the Local Domain)
    - =/bin=: 传统 =Unix= 命令的存放目录
    - =/sbin=: 传统 =Unix= 管理类命令存放目录，只有 =root= 才能使用的命令
    - =/usr=: 第三方程序安装目录，=/usr/bin=, =/usr/sbin=, =/usr/lib=，其中 =/usr/lib= 目录中存放了共享库（动态链接库）
    - =/etc=: 标准 Unix 系统配置文件存放目录，如用户密码文件 j=/etc/passwd=。此目录实际为指向 =/private/etc= 的链接。
    - =/dev=: 设备文件存放目录
    - =/tmp=: 临时文件存放目录，其权限为所有人任意读写。此目录实际为指向 =/private/tmp= 的链接。
    - =/var=: 存放经常变化的文件，如日志文件。此目录实际为指向 =/private/var= 的链接。

*** macOS 特有的目录

    =macOS= 系统中，除了标准的 =Unix= 目录外，还增加了特有的目录。

    - =/Applications=: 应用程序目录，默认所有的 =GUI= 应用程序都安装在这里(GUI Application)
    - =/Applications/Utilities=: =GUI= 应用程序工具集(GUI utilities)
    - =/Developer=: =Xcode= 开发这工具（Xcode developer tools)
    - =/Library=: 系统的数据文件、帮助文件、文档等等（User installed frameworks)
    - =/Network=: 网络节点存放目录(the Network domian)
    - =/System=: 只包含一个名为 =Library= 的目录，这个子目录中存放了系统的绝大部分组件，如各种=framework=，以及内核模块，字体文件等等
    - =/Users=: 存放用户的个人资料和配置。每个用户有自己的单独目录(Home directories, the User domain)
    - =~/Desktop=: 用户的桌面(Your desktop)
    - =~/Document=: 用户的文档目录(Your documents)
    - =~/Movies=: 用户的电影目录(Your movies directory: iMovie uses it by default)
    - =~/Music=: 用户的音乐目录(Your music directory: iTunes uses it by default)
    - =~/Pictures=: 用户的图片目录(Your picture directory: iPhoto uses it by default)
    - =~/Public=: 用户共享目录(For sharing: contents visible to others)
    - =~/Sites=: 用户搭建网站的目录(Your www(apache) diectory)
    - =/Volumes=: 文件系统挂载点存放目录，例如U盘
    - =/cores=: 内核转储文件存放目录。当一个进程崩溃时，如果系统允许则会产生转储文件。
    - =/private=: 里面的子目录存放了=/tmp=, =/var=, =/etc=等链接目录的目标目录

* Footnotes
* COMMENT Local Variables                          :ARCHIVE:
  # Local Variables:
  # org-hugo-auto-export-on-save: t
  # End:
